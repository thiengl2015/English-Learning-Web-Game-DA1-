# Gamified English Learning App - Database ERD & Data Model

## Entity Relationship Diagram (ERD)

\`\`\`
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    DATABASE SCHEMA                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      USERS       â”‚       â”‚   USER_PROGRESS  â”‚       â”‚  USER_CURRENCY   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚â”€â”€â”€â”€â”€â”€>â”‚ user_id (FK)     â”‚       â”‚ user_id (FK, PK) â”‚
â”‚ username         â”‚       â”‚ units_completed  â”‚       â”‚ crystals         â”‚
â”‚ email            â”‚       â”‚ words_learned    â”‚       â”‚ crowns           â”‚
â”‚ password_hash    â”‚       â”‚ streak_days      â”‚       â”‚ updated_at       â”‚
â”‚ avatar_url       â”‚       â”‚ total_study_mins â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ level            â”‚       â”‚ community_rank   â”‚               â”‚
â”‚ subscription     â”‚       â”‚ daily_goal_mins  â”‚               â”‚
â”‚ joined_date      â”‚       â”‚ study_time_today â”‚               â”‚
â”‚ status           â”‚       â”‚ last_study_date  â”‚               â”‚
â”‚ last_active      â”‚       â”‚ updated_at       â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
        â”‚                          â”‚                          â”‚
        â”‚                          â”‚                          â”‚
        â–¼                          â–¼                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      UNITS       â”‚       â”‚ USER_UNIT_PROG   â”‚       â”‚ TRANSACTIONS     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚â”€â”€â”€â”€â”€â”€>â”‚ user_id (FK)     â”‚       â”‚ id (PK)          â”‚
â”‚ title            â”‚       â”‚ unit_id (FK)     â”‚       â”‚ user_id (FK)     â”‚
â”‚ subtitle         â”‚       â”‚ progress         â”‚       â”‚ amount           â”‚
â”‚ icon             â”‚       â”‚ total_lessons    â”‚       â”‚ type             â”‚
â”‚ order_index      â”‚       â”‚ crown_level      â”‚       â”‚ status           â”‚
â”‚ total_lessons    â”‚       â”‚ unlocked         â”‚       â”‚ created_at       â”‚
â”‚ created_at       â”‚       â”‚ completed_at     â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     LESSONS      â”‚       â”‚ USER_LESSON_PROG â”‚       â”‚   CHECKPOINTS    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚â”€â”€â”€â”€â”€â”€>â”‚ user_id (FK)     â”‚       â”‚ id (PK)          â”‚
â”‚ unit_id (FK)     â”‚       â”‚ lesson_id (FK)   â”‚       â”‚ title            â”‚
â”‚ title            â”‚       â”‚ completed        â”‚       â”‚ subtitle         â”‚
â”‚ type             â”‚       â”‚ stars            â”‚       â”‚ after_unit_id    â”‚
â”‚ order_index      â”‚       â”‚ attempts         â”‚       â”‚ skips_units      â”‚
â”‚ position_x       â”‚       â”‚ best_score       â”‚       â”‚ created_at       â”‚
â”‚ position_y       â”‚       â”‚ completed_at     â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ created_at       â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   VOCABULARY     â”‚       â”‚ USER_VOCABULARY  â”‚       â”‚ LESSON_VOCAB     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚â”€â”€â”€â”€â”€â”€>â”‚ user_id (FK)     â”‚       â”‚ lesson_id (FK)   â”‚
â”‚ word             â”‚       â”‚ vocab_id (FK)    â”‚       â”‚ vocab_id (FK)    â”‚
â”‚ phonetic         â”‚       â”‚ status           â”‚       â”‚ order_index      â”‚
â”‚ translation      â”‚       â”‚ correct_count    â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ audio_url        â”‚       â”‚ incorrect_count  â”‚
â”‚ image_url        â”‚       â”‚ last_reviewed    â”‚
â”‚ level            â”‚       â”‚ mastery_level    â”‚
â”‚ created_at       â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ACHIEVEMENTS   â”‚       â”‚ USER_ACHIEVEMENT â”‚       â”‚  DAILY_TASKS     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚â”€â”€â”€â”€â”€â”€>â”‚ user_id (FK)     â”‚       â”‚ id (PK)          â”‚
â”‚ title            â”‚       â”‚ achievement_id   â”‚       â”‚ title            â”‚
â”‚ description      â”‚       â”‚ status           â”‚       â”‚ description      â”‚
â”‚ category         â”‚       â”‚ progress         â”‚       â”‚ target           â”‚
â”‚ target           â”‚       â”‚ claimed_at       â”‚       â”‚ reward           â”‚
â”‚ reward           â”‚       â”‚ unlocked_at      â”‚       â”‚ icon             â”‚
â”‚ icon             â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ task_type        â”‚
â”‚ badge_url        â”‚                                  â”‚ created_at       â”‚
â”‚ medal            â”‚                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ chain_id (FK)    â”‚                                          â”‚
â”‚ order_in_chain   â”‚                                          â”‚
â”‚ created_at       â”‚                                          â–¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                      â”‚ USER_DAILY_TASK  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   GAME_CONFIG    â”‚       â”‚  GAME_SESSIONS   â”‚       â”‚ user_id (FK)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚ task_id (FK)     â”‚
â”‚ id (PK)          â”‚â”€â”€â”€â”€â”€â”€>â”‚ id (PK)          â”‚       â”‚ date             â”‚
â”‚ unit_id (FK)     â”‚       â”‚ user_id (FK)     â”‚       â”‚ progress         â”‚
â”‚ lesson_id (FK)   â”‚       â”‚ game_config_id   â”‚       â”‚ status           â”‚
â”‚ game_type        â”‚       â”‚ score            â”‚       â”‚ claimed          â”‚
â”‚ difficulty       â”‚       â”‚ correct_answers  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ questions_count  â”‚       â”‚ wrong_answers    â”‚
â”‚ time_limit       â”‚       â”‚ time_spent       â”‚
â”‚ created_at       â”‚       â”‚ completed_at     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    QUESTIONS     â”‚       â”‚    FEEDBACK      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚       â”‚ id (PK)          â”‚
â”‚ lesson_id (FK)   â”‚       â”‚ user_id (FK)     â”‚
â”‚ type             â”‚       â”‚ type             â”‚
â”‚ prompt           â”‚       â”‚ message          â”‚
â”‚ image_url        â”‚       â”‚ rating           â”‚
â”‚ audio_url        â”‚       â”‚ status           â”‚
â”‚ options (JSON)   â”‚       â”‚ created_at       â”‚
â”‚ correct_answer   â”‚       â”‚ reviewed_at      â”‚
â”‚ created_at       â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
\`\`\`

---

## Detailed Table Definitions

### 1. USERS (NgÆ°á»i dÃ¹ng)
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| id | UUID | PK, NOT NULL | ID ngÆ°á»i dÃ¹ng |
| username | VARCHAR(50) | UNIQUE, NOT NULL | TÃªn Ä‘Äƒng nháº­p |
| email | VARCHAR(255) | UNIQUE, NOT NULL | Email |
| password_hash | VARCHAR(255) | NOT NULL | Máº­t kháº©u Ä‘Ã£ hash |
| avatar_url | VARCHAR(500) | NULL | ÄÆ°á»ng dáº«n avatar |
| level | INTEGER | DEFAULT 1 | Cáº¥p Ä‘á»™ ngÆ°á»i dÃ¹ng (1-6+) |
| subscription | ENUM | DEFAULT 'Free' | 'Free' hoáº·c 'Super' |
| joined_date | TIMESTAMP | DEFAULT NOW() | NgÃ y tham gia |
| status | ENUM | DEFAULT 'Active' | 'Active' hoáº·c 'Inactive' |
| last_active | TIMESTAMP | NULL | Láº§n hoáº¡t Ä‘á»™ng cuá»‘i |

### 2. USER_PROGRESS (Tiáº¿n Ä‘á»™ ngÆ°á»i dÃ¹ng)
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| user_id | UUID | FK â†’ users.id, PK | ID ngÆ°á»i dÃ¹ng |
| units_completed | INTEGER | DEFAULT 0 | Sá»‘ unit Ä‘Ã£ hoÃ n thÃ nh |
| words_learned | INTEGER | DEFAULT 0 | Sá»‘ tá»« Ä‘Ã£ há»c |
| streak_days | INTEGER | DEFAULT 0 | Sá»‘ ngÃ y há»c liÃªn tiáº¿p |
| total_study_minutes | INTEGER | DEFAULT 0 | Tá»•ng thá»i gian há»c (phÃºt) |
| community_rank | INTEGER | NULL | Xáº¿p háº¡ng cá»™ng Ä‘á»“ng |
| daily_goal_minutes | INTEGER | DEFAULT 15 | Má»¥c tiÃªu há»c hÃ ng ngÃ y (phÃºt) |
| study_time_today | INTEGER | DEFAULT 0 | Thá»i gian há»c hÃ´m nay (giÃ¢y) |
| last_study_date | DATE | NULL | NgÃ y há»c cuá»‘i |
| updated_at | TIMESTAMP | DEFAULT NOW() | Cáº­p nháº­t láº§n cuá»‘i |

### 3. USER_CURRENCY (Tiá»n tá»‡ ngÆ°á»i dÃ¹ng)
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| user_id | UUID | FK â†’ users.id, PK | ID ngÆ°á»i dÃ¹ng |
| crystals | INTEGER | DEFAULT 0 | Sá»‘ crystal/gem |
| crowns | INTEGER | DEFAULT 0 | Sá»‘ crown |
| updated_at | TIMESTAMP | DEFAULT NOW() | Cáº­p nháº­t láº§n cuá»‘i |

### 4. UNITS (ÄÆ¡n vá»‹ há»c)
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| id | INTEGER | PK, AUTO_INCREMENT | ID unit |
| title | VARCHAR(100) | NOT NULL | TÃªn unit (Unit 1, Unit 2...) |
| subtitle | VARCHAR(200) | NOT NULL | MÃ´ táº£ (Greetings & Basics) |
| icon | VARCHAR(10) | NOT NULL | Icon emoji |
| order_index | INTEGER | NOT NULL | Thá»© tá»± hiá»ƒn thá»‹ |
| total_lessons | INTEGER | DEFAULT 15 | Tá»•ng sá»‘ bÃ i há»c |
| created_at | TIMESTAMP | DEFAULT NOW() | NgÃ y táº¡o |

### 5. USER_UNIT_PROGRESS (Tiáº¿n Ä‘á»™ unit cá»§a ngÆ°á»i dÃ¹ng)
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| user_id | UUID | FK â†’ users.id | ID ngÆ°á»i dÃ¹ng |
| unit_id | INTEGER | FK â†’ units.id | ID unit |
| progress | INTEGER | DEFAULT 0 | Sá»‘ bÃ i Ä‘Ã£ hoÃ n thÃ nh |
| crown_level | INTEGER | DEFAULT 0 | Má»©c crown (0-3) |
| unlocked | BOOLEAN | DEFAULT FALSE | ÄÃ£ má»Ÿ khÃ³a |
| completed_at | TIMESTAMP | NULL | NgÃ y hoÃ n thÃ nh |
| PRIMARY KEY | | (user_id, unit_id) | |

### 6. LESSONS (BÃ i há»c)
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| id | INTEGER | PK, AUTO_INCREMENT | ID bÃ i há»c |
| unit_id | INTEGER | FK â†’ units.id | ID unit |
| title | VARCHAR(100) | NOT NULL | TÃªn bÃ i (Intro Vocab 1) |
| type | ENUM | NOT NULL | 'vocabulary', 'practice', 'test' |
| order_index | INTEGER | NOT NULL | Thá»© tá»± trong unit |
| position_x | DECIMAL(5,2) | NOT NULL | Vá»‹ trÃ­ X (%) trÃªn map |
| position_y | DECIMAL(5,2) | NOT NULL | Vá»‹ trÃ­ Y (%) trÃªn map |
| created_at | TIMESTAMP | DEFAULT NOW() | NgÃ y táº¡o |

### 7. USER_LESSON_PROGRESS (Tiáº¿n Ä‘á»™ bÃ i há»c)
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| user_id | UUID | FK â†’ users.id | ID ngÆ°á»i dÃ¹ng |
| lesson_id | INTEGER | FK â†’ lessons.id | ID bÃ i há»c |
| completed | BOOLEAN | DEFAULT FALSE | ÄÃ£ hoÃ n thÃ nh |
| stars | INTEGER | DEFAULT 0 | Sá»‘ sao (0-3) |
| attempts | INTEGER | DEFAULT 0 | Sá»‘ láº§n thá»­ |
| best_score | INTEGER | DEFAULT 0 | Äiá»ƒm cao nháº¥t |
| completed_at | TIMESTAMP | NULL | NgÃ y hoÃ n thÃ nh |
| PRIMARY KEY | | (user_id, lesson_id) | |

### 8. CHECKPOINTS (Äiá»ƒm kiá»ƒm tra)
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| id | VARCHAR(50) | PK | ID checkpoint |
| title | VARCHAR(100) | NOT NULL | TÃªn checkpoint |
| subtitle | VARCHAR(200) | NOT NULL | MÃ´ táº£ |
| after_unit_id | INTEGER | FK â†’ units.id | Sau unit nÃ o |
| skips_units | JSON | NOT NULL | Danh sÃ¡ch unit Ä‘Æ°á»£c skip |
| created_at | TIMESTAMP | DEFAULT NOW() | NgÃ y táº¡o |

### 9. VOCABULARY (Tá»« vá»±ng)
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| id | INTEGER | PK, AUTO_INCREMENT | ID tá»« vá»±ng |
| word | VARCHAR(100) | NOT NULL | Tá»« tiáº¿ng Anh |
| phonetic | VARCHAR(100) | NULL | PhiÃªn Ã¢m |
| translation | VARCHAR(200) | NOT NULL | NghÄ©a tiáº¿ng Viá»‡t |
| audio_url | VARCHAR(500) | NULL | ÄÆ°á»ng dáº«n audio |
| image_url | VARCHAR(500) | NULL | ÄÆ°á»ng dáº«n hÃ¬nh áº£nh |
| level | INTEGER | DEFAULT 1 | Cáº¥p Ä‘á»™ tá»« vá»±ng |
| created_at | TIMESTAMP | DEFAULT NOW() | NgÃ y táº¡o |

### 10. USER_VOCABULARY (Tá»« vá»±ng ngÆ°á»i dÃ¹ng)
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| user_id | UUID | FK â†’ users.id | ID ngÆ°á»i dÃ¹ng |
| vocab_id | INTEGER | FK â†’ vocabulary.id | ID tá»« vá»±ng |
| status | ENUM | DEFAULT 'learning' | 'learning', 'known', 'mastered' |
| correct_count | INTEGER | DEFAULT 0 | Sá»‘ láº§n Ä‘Ãºng |
| incorrect_count | INTEGER | DEFAULT 0 | Sá»‘ láº§n sai |
| last_reviewed | TIMESTAMP | NULL | Láº§n Ã´n cuá»‘i |
| mastery_level | INTEGER | DEFAULT 0 | Má»©c thÃ nh tháº¡o (0-5) |
| PRIMARY KEY | | (user_id, vocab_id) | |

### 11. LESSON_VOCABULARY (Tá»« vá»±ng trong bÃ i)
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| lesson_id | INTEGER | FK â†’ lessons.id | ID bÃ i há»c |
| vocab_id | INTEGER | FK â†’ vocabulary.id | ID tá»« vá»±ng |
| order_index | INTEGER | NOT NULL | Thá»© tá»± |
| PRIMARY KEY | | (lesson_id, vocab_id) | |

### 12. ACHIEVEMENTS (ThÃ nh tá»±u)
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| id | VARCHAR(50) | PK | ID thÃ nh tá»±u |
| title | VARCHAR(100) | NOT NULL | TÃªn thÃ nh tá»±u |
| description | VARCHAR(300) | NOT NULL | MÃ´ táº£ |
| category | ENUM | NOT NULL | 'units', 'vocabulary', 'streak', 'time', 'special' |
| target | INTEGER | NOT NULL | Má»¥c tiÃªu cáº§n Ä‘áº¡t |
| reward | INTEGER | NOT NULL | Pháº§n thÆ°á»Ÿng crystal |
| icon | VARCHAR(10) | NOT NULL | Icon emoji |
| badge_url | VARCHAR(500) | NULL | ÄÆ°á»ng dáº«n huy hiá»‡u |
| medal | VARCHAR(10) | NULL | Medal emoji (ğŸ¥‰ğŸ¥ˆğŸ¥‡ğŸ‘‘) |
| chain_id | VARCHAR(50) | NULL | ID chuá»—i thÃ nh tá»±u |
| order_in_chain | INTEGER | DEFAULT 0 | Thá»© tá»± trong chuá»—i |
| created_at | TIMESTAMP | DEFAULT NOW() | NgÃ y táº¡o |

### 13. USER_ACHIEVEMENT (ThÃ nh tá»±u ngÆ°á»i dÃ¹ng)
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| user_id | UUID | FK â†’ users.id | ID ngÆ°á»i dÃ¹ng |
| achievement_id | VARCHAR(50) | FK â†’ achievements.id | ID thÃ nh tá»±u |
| status | ENUM | DEFAULT 'locked' | 'locked', 'in-progress', 'completed', 'claimed' |
| progress | INTEGER | DEFAULT 0 | Tiáº¿n Ä‘á»™ hiá»‡n táº¡i |
| unlocked_at | TIMESTAMP | NULL | NgÃ y má»Ÿ khÃ³a |
| claimed_at | TIMESTAMP | NULL | NgÃ y nháº­n thÆ°á»Ÿng |
| PRIMARY KEY | | (user_id, achievement_id) | |

### 14. DAILY_TASKS (Nhiá»‡m vá»¥ hÃ ng ngÃ y)
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| id | VARCHAR(50) | PK | ID nhiá»‡m vá»¥ |
| title | VARCHAR(100) | NOT NULL | TÃªn nhiá»‡m vá»¥ |
| description | VARCHAR(300) | NOT NULL | MÃ´ táº£ |
| target | INTEGER | NOT NULL | Má»¥c tiÃªu |
| reward | INTEGER | NOT NULL | Pháº§n thÆ°á»Ÿng crystal |
| icon | VARCHAR(10) | NOT NULL | Icon emoji |
| task_type | ENUM | NOT NULL | 'lesson', 'vocabulary', 'time', 'streak' |
| created_at | TIMESTAMP | DEFAULT NOW() | NgÃ y táº¡o |

### 15. USER_DAILY_TASK (Nhiá»‡m vá»¥ hÃ ng ngÃ y ngÆ°á»i dÃ¹ng)
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| user_id | UUID | FK â†’ users.id | ID ngÆ°á»i dÃ¹ng |
| task_id | VARCHAR(50) | FK â†’ daily_tasks.id | ID nhiá»‡m vá»¥ |
| date | DATE | NOT NULL | NgÃ y |
| progress | INTEGER | DEFAULT 0 | Tiáº¿n Ä‘á»™ |
| status | ENUM | DEFAULT 'in-progress' | 'in-progress', 'completed', 'claimed' |
| PRIMARY KEY | | (user_id, task_id, date) | |

### 16. GAME_CONFIG (Cáº¥u hÃ¬nh game)
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| id | INTEGER | PK, AUTO_INCREMENT | ID config |
| unit_id | INTEGER | FK â†’ units.id | ID unit |
| lesson_id | INTEGER | FK â†’ lessons.id | ID bÃ i há»c |
| game_type | ENUM | NOT NULL | 'signal-check', 'galaxy-match', 'word-match', 'space-race' |
| difficulty | ENUM | DEFAULT 'medium' | 'easy', 'medium', 'hard' |
| questions_count | INTEGER | DEFAULT 10 | Sá»‘ cÃ¢u há»i |
| time_limit | INTEGER | DEFAULT 120 | Thá»i gian giá»›i háº¡n (giÃ¢y) |
| created_at | TIMESTAMP | DEFAULT NOW() | NgÃ y táº¡o |

### 17. GAME_SESSIONS (PhiÃªn chÆ¡i game)
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| id | UUID | PK | ID phiÃªn |
| user_id | UUID | FK â†’ users.id | ID ngÆ°á»i dÃ¹ng |
| game_config_id | INTEGER | FK â†’ game_config.id | ID config |
| score | INTEGER | DEFAULT 0 | Äiá»ƒm sá»‘ |
| correct_answers | INTEGER | DEFAULT 0 | Sá»‘ cÃ¢u Ä‘Ãºng |
| wrong_answers | JSON | NULL | Chi tiáº¿t cÃ¢u sai |
| time_spent | INTEGER | DEFAULT 0 | Thá»i gian (giÃ¢y) |
| completed_at | TIMESTAMP | DEFAULT NOW() | NgÃ y hoÃ n thÃ nh |

### 18. QUESTIONS (CÃ¢u há»i)
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| id | VARCHAR(50) | PK | ID cÃ¢u há»i |
| lesson_id | INTEGER | FK â†’ lessons.id | ID bÃ i há»c |
| type | ENUM | NOT NULL | 'vocabulary', 'grammar' |
| prompt | VARCHAR(500) | NOT NULL | Ná»™i dung cÃ¢u há»i |
| image_url | VARCHAR(500) | NULL | HÃ¬nh áº£nh minh há»a |
| audio_url | VARCHAR(500) | NULL | Audio |
| options | JSON | NOT NULL | CÃ¡c lá»±a chá»n |
| correct_answer_id | VARCHAR(10) | NOT NULL | ID Ä‘Ã¡p Ã¡n Ä‘Ãºng |
| created_at | TIMESTAMP | DEFAULT NOW() | NgÃ y táº¡o |

### 19. TRANSACTIONS (Giao dá»‹ch)
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| id | VARCHAR(50) | PK | ID giao dá»‹ch |
| user_id | UUID | FK â†’ users.id | ID ngÆ°á»i dÃ¹ng |
| amount | DECIMAL(10,2) | NOT NULL | Sá»‘ tiá»n |
| type | ENUM | NOT NULL | 'Subscription', 'PremiumFeature' |
| status | ENUM | DEFAULT 'Pending' | 'Completed', 'Pending', 'Failed' |
| created_at | TIMESTAMP | DEFAULT NOW() | NgÃ y táº¡o |

### 20. FEEDBACK (Pháº£n há»“i)
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| id | UUID | PK | ID pháº£n há»“i |
| user_id | UUID | FK â†’ users.id | ID ngÆ°á»i dÃ¹ng |
| type | ENUM | NOT NULL | 'Bug Report', 'Suggestion', 'Review' |
| message | TEXT | NOT NULL | Ná»™i dung |
| rating | INTEGER | NULL | ÄÃ¡nh giÃ¡ (1-5) |
| status | ENUM | DEFAULT 'New' | 'New', 'Reviewed', 'Resolved' |
| created_at | TIMESTAMP | DEFAULT NOW() | NgÃ y táº¡o |
| reviewed_at | TIMESTAMP | NULL | NgÃ y xá»­ lÃ½ |

---

## Key Relationships Summary

| Relationship | Type | Description |
|-------------|------|-------------|
| User â†’ UserProgress | 1:1 | Má»—i user cÃ³ 1 record tiáº¿n Ä‘á»™ |
| User â†’ UserCurrency | 1:1 | Má»—i user cÃ³ 1 record tiá»n tá»‡ |
| User â†’ Unit | M:N (via USER_UNIT_PROGRESS) | User há»c nhiá»u unit |
| Unit â†’ Lesson | 1:N | Má»—i unit cÃ³ nhiá»u bÃ i há»c |
| Lesson â†’ Vocabulary | M:N (via LESSON_VOCABULARY) | BÃ i há»c chá»©a nhiá»u tá»« vá»±ng |
| User â†’ Vocabulary | M:N (via USER_VOCABULARY) | User há»c nhiá»u tá»« vá»±ng |
| User â†’ Achievement | M:N (via USER_ACHIEVEMENT) | User Ä‘áº¡t nhiá»u thÃ nh tá»±u |
| Achievement â†’ Achievement | Self-ref (chain_id) | Chuá»—i thÃ nh tá»±u |
| Lesson â†’ GameConfig | 1:N | BÃ i há»c cÃ³ cáº¥u hÃ¬nh game |
| User â†’ GameSession | 1:N | User cÃ³ nhiá»u phiÃªn chÆ¡i |
| User â†’ Feedback | 1:N | User gá»­i nhiá»u pháº£n há»“i |
| User â†’ Transaction | 1:N | User cÃ³ nhiá»u giao dá»‹ch |

---

## Sample Data Structures (JSON)

### Achievement Chain Example:
\`\`\`json
{
  "chain_id": "units_chain",
  "achievements": [
    {"id": "units_5", "title": "NgÆ°á»i má»Ÿ Ä‘Æ°á»ng", "target": 5, "order": 1},
    {"id": "units_10", "title": "NhÃ  thÃ¡m hiá»ƒm", "target": 10, "order": 2},
    {"id": "units_20", "title": "Báº­c tháº§y", "target": 20, "order": 3}
  ]
}
\`\`\`

### Daily Task Progress Example:
\`\`\`json
{
  "user_id": "uuid-xxx",
  "date": "2025-01-12",
  "tasks": [
    {"task_id": "complete_lesson", "progress": 2, "target": 3, "status": "in-progress"},
    {"task_id": "learn_words", "progress": 10, "target": 10, "status": "completed"},
    {"task_id": "study_time", "progress": 15, "target": 15, "status": "claimed"}
  ]
}
\`\`\`

### Game Session Wrong Answers:
\`\`\`json
{
  "wrong_answers": [
    {
      "question_id": "q_vocab_001",
      "prompt": "Tá»« 'Hello' nghÄ©a lÃ  gÃ¬?",
      "your_answer": "Táº¡m biá»‡t",
      "correct_answer": "Xin chÃ o"
    }
  ]
}
